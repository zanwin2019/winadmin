import{F as O}from"./index-4031c8a8.js";import{u as v}from"./index-cd8034c1.js";import{d as N,_ as V,$ as E,b as m,i as P,ag as r,o as J,O as z,P as o,a as p,V as i,U as g,T as k,aa as B,n as L}from"./@vue-859b4330.js";import"./index-85c2db4d.js";import"./pinia-f5c09375.js";import"./vue-router-0ce8cd6d.js";import"./vue-i18n-a46d56de.js";import"./@intlify-d9393dcf.js";import"./vue-9a76c5f3.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-e9b58552.js";import"./nprogress-28073a82.js";import"./axios-28bc18a3.js";import"./qs-42f07db3.js";import"./side-channel-99bfd094.js";import"./get-intrinsic-4a38020a.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-6482c9b0.js";import"./set-function-length-9c361e89.js";import"./define-data-property-bf6c9733.js";import"./has-property-descriptors-58650a95.js";import"./gopd-e1d311d9.js";import"./object-inspect-70513235.js";import"./element-plus-9b914f77.js";import"./lodash-es-21c98b27.js";import"./@vueuse-8b13c3f4.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-18559e02.js";import"./_plugin-vue_export-helper-c27b6911.js";const R=[{label:"上级菜单",key:"pid",type:"cascader",value:0,isrow:!0,props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",children:"children"},options:[]},{label:"菜单类型",key:"type",type:"radio",value:0,rule:!0,disabled:!1,isrow:!0,options:[{key:1,label:"菜单",value:3},{key:2,label:"节点",value:4}]},{label:"菜单名称",key:"name",type:"input",rule:!0,isrow:!1},{label:"权限标识",key:"permission",type:"input",rule:!0,isrow:!1},{label:"请求地址",key:"href",type:"input",rule:!0,isrow:!1},{label:"请求类型",key:"method",type:"select",rule:!0,disabled:!1,isrow:!1,options:[{value:"1",label:"POST"},{value:"2",label:"GET"},{value:"3",label:"PUT"},{value:"4",label:"DELETE"},{value:"5",label:"PATCH"}]},{label:"重定向",key:"redirect",type:"input",rule:!1,isrow:!1},{label:"路由路径",key:"path",type:"input",rule:!0,isrow:!1},{label:"组件路径",key:"component",type:"input",rule:!0,isrow:!1},{label:"icon",key:"icon",type:"icon",rule:!1,isrow:!1},{label:"菜单排序",key:"sort",type:"number",rule:!1,isrow:!1},{label:"打开方式",key:"is_iframe",type:"radio",value:1,disabled:!1,isrow:!1,options:[{label:"内链",value:0},{label:"外链",value:1}]},{label:"是否隐藏",key:"is_hidden",type:"radio",value:1,disabled:!1,isrow:!1,options:[{label:"隐藏",value:1},{label:"不隐藏",value:0}]},{label:"菜单状态",key:"status",type:"radio",value:0,disabled:!1,isrow:!1,options:[{label:"启用",value:1},{label:"禁用",value:0}]},{label:"备注",key:"remark",type:"textarea",rule:!1,isrow:!0}],U={style:{color:"#fff"}},A={class:"dialog-footer"},Me=N({__name:"dialog",props:{menuList:Object},emits:["handleQuery","MenuhandleClose"],setup(h,{expose:_,emit:w}){const e=V({formModels:R,ruleForm:{pid:"0",type:3,name:"",permission:"",sort:0,is_hidden:0,status:1,remark:"",is_iframe:1,href:"",method:"",redirect:"",path:"",component:"",icon:""},dialog:{isShowDialog:!1,type:"",title:"",submitTxt:""}}),u=h;E(u);const d=m(""),f=m(),y=m(),s=w,c=()=>{var t=e.formModels.filter(a=>a.options);for(var l of t)l.key==="pid"&&(l.options=JSON.parse(JSON.stringify(u.menuList)))},F=(t,l)=>{e.dialog.isShowDialog=!0,c(),d.value=t,t==="add"?(e.dialog.title="新增菜单",e.dialog.submitTxt="新 增"):(y.value=l.id,L(()=>{e.ruleForm=JSON.parse(JSON.stringify(l))}),e.dialog.title=`修改菜单【${l.name}】`,e.dialog.submitTxt="修 改")},x=()=>{setTimeout(()=>{s("handleQuery"),s("MenuhandleClose")},500),e.dialog.isShowDialog=!1},S=()=>{e.dialog.isShowDialog=!1},T=()=>{setTimeout(()=>{s("MenuhandleClose")},500)},C=async()=>{var l;if(await((l=f.value)==null?void 0:l.validateJbxx())){if(d.value==="edit"){const a=e.ruleForm,n=y.value;await v().editMenu(a,n)}else await v().addMenu(e.ruleForm);x()}};return P(async()=>{c()}),_({openDialog:F}),(t,l)=>{const a=r("ele-Edit"),n=r("el-icon"),b=r("el-button"),M=r("el-dialog");return J(),z(M,{modelValue:e.dialog.isShowDialog,"onUpdate:modelValue":l[0]||(l[0]=D=>e.dialog.isShowDialog=D),width:"769px",draggable:"",onClose:T},{header:o(()=>[p("div",U,[i(n,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:o(()=>[i(a)]),_:1}),p("span",null,g(e.dialog.title),1)])]),footer:o(()=>[p("span",A,[i(b,{onClick:S,size:"default"},{default:o(()=>[k("取 消")]),_:1}),i(b,{type:"primary",onClick:C,size:"default"},{default:o(()=>[k(g(e.dialog.submitTxt),1)]),_:1})])]),default:o(()=>[i(O,{formModels:e.formModels,ruleForm:e.ruleForm,ref_key:"myFormRef",ref:f},B({_:2},[e.ruleForm.type===3?{name:"href",fn:o(()=>[]),key:"0"}:void 0,e.ruleForm.type===3?{name:"method",fn:o(()=>[]),key:"1"}:void 0,e.ruleForm.type===3?{name:"is_iframe",fn:o(()=>[]),key:"2"}:void 0,e.ruleForm.type===4?{name:"pathname",fn:o(()=>[]),key:"3"}:void 0,e.ruleForm.type===4?{name:"path",fn:o(()=>[]),key:"4"}:void 0,e.ruleForm.type===4?{name:"component",fn:o(()=>[]),key:"5"}:void 0,e.ruleForm.type===4?{name:"icon",fn:o(()=>[]),key:"6"}:void 0,e.ruleForm.type===4?{name:"redirect",fn:o(()=>[]),key:"7"}:void 0]),1032,["formModels","ruleForm"])]),_:1},8,["modelValue"])}}});export{Me as default};
