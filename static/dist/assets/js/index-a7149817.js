import{p as Z}from"./print-js-c817564d.js";import{t as ee}from"./js-table2excel-2aecd212.js";import{S as te}from"./sortablejs-85e2743d.js";import{s as oe}from"./pinia-f5c09375.js";import{u as ae}from"./index-fa427f68.js";import{a as le}from"./element-plus-9b914f77.js";import{d as $,b as ne,_ as ie,j as w,ag as s,aq as re,o as n,c as f,Q as se,O as h,P as d,V as i,S as b,F as v,a8 as V,K as ce,I as pe,T,U as de,L as me,a as S,n as ge}from"./@vue-859b4330.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";import"./@intlify-d9393dcf.js";import"./vue-router-0ce8cd6d.js";import"./vue-i18n-a46d56de.js";import"./vue-9a76c5f3.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-e9b58552.js";import"./nprogress-28073a82.js";import"./axios-28bc18a3.js";import"./qs-42f07db3.js";import"./side-channel-99bfd094.js";import"./get-intrinsic-4a38020a.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-6482c9b0.js";import"./set-function-length-9c361e89.js";import"./define-data-property-bf6c9733.js";import"./has-property-descriptors-58650a95.js";import"./gopd-e1d311d9.js";import"./object-inspect-70513235.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-18559e02.js";import"./lodash-es-21c98b27.js";import"./@vueuse-8b13c3f4.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";const ue={class:"table-container"},fe={class:"table-footer mt15"},be={key:1,class:"table-footer-tool"},ye={class:"tool-box"},_e=["data-key"],ke=$({name:"netxTable"}),xe=$({...ke,props:{data:{type:Array,default:()=>[]},header:{type:Array,default:()=>[]},config:{type:Object,default:()=>{}},printName:{type:String,default:()=>""}},emits:["delRow","pageChange","sortHeader"],setup(c,{expose:L,emit:E}){const l=c,u=E,z=ne(),I=ae(),{themeConfig:A}=oe(I),a=ie({page:{page:1,page_size:10},selectlist:[],checkListAll:!0,checkListIndeterminate:!1}),N=w(()=>!!l.config.isBorder),y=w(()=>l.config),R=w(()=>l.header.filter(t=>t.isCheck)),U=t=>{t?l.header.forEach(o=>o.isCheck=!0):l.header.forEach(o=>o.isCheck=!1),a.checkListIndeterminate=!1},j=()=>{const t=l.header.filter(o=>o.isCheck).length;a.checkListAll=t===l.header.length,a.checkListIndeterminate=t>0&&t<l.header.length},B=t=>{a.selectlist=t},D=t=>{u("delRow",t)},H=t=>{a.page.page_size=t,u("pageChange",a.page)},P=t=>{a.page.page=t,u("pageChange",a.page)},O=()=>{a.page.page=1,a.page.page_size=10,u("pageChange",a.page)},q=()=>{let t="",o="",r={};l.header.forEach(p=>{p.type==="text"&&(t+=`<th class="table-th">${p.title}</th>`)}),l.data.forEach((p,g)=>{r[g]||(r[g]=[]),l.header.forEach(m=>{m.type==="text"?r[g].push(`<td class="table-th table-center">${p[m.key]}</td>`):m.type==="image"&&r[g].push(`<td class="table-th table-center"><img src="${p[m.key]}" style="width:${m.width}px;height:${m.height}px;"/></td>`)}),o+=`<tr>${r[g].join("")}</tr>`}),Z({printable:`<div style=display:flex;flex-direction:column;text-align:center><h3>${l.printName}</h3></div><table border=1 cellspacing=0><tr>${t}${o}</table>`,type:"raw-html",css:["//at.alicdn.com/t/c/font_2298093_rnp72ifj3ba.css","//unpkg.com/element-plus/dist/index.css"],style:"@media print{.mb15{margin-bottom:15px;}.el-button--small i.iconfont{font-size: 12px !important;margin-right: 5px;}}; .table-th{word-break: break-all;white-space: pre-wrap;}.table-center{text-align: center;}"})},F=()=>{if(a.selectlist.length<=0)return le.warning("请先选择要导出的数据");ee(l.header,a.selectlist,`${A.value.globalTitle} ${new Date().toLocaleString()}`)},J=()=>{u("pageChange",a.page)},K=()=>{ge(()=>{const t=te.create(z.value,{handle:".handle",dataIdAttr:"data-key",animation:150,onEnd:()=>{const o=[];t.toArray().forEach(r=>{l.header.forEach(p=>{p.key===r&&o.push({...p})})}),u("sortHeader",o)}})})};return L({pageReset:O}),(t,o)=>{const r=s("el-table-column"),p=s("el-image"),g=s("el-button"),m=s("el-popconfirm"),M=s("el-empty"),Q=s("el-table"),W=s("el-pagination"),_=s("SvgIcon"),k=s("el-checkbox"),G=s("el-scrollbar"),X=s("el-popover"),Y=re("loading");return n(),f("div",ue,[se((n(),h(Q,me({data:c.data,border:N.value},t.$attrs,{"row-key":"id",style:{width:"100%"},"header-cell-style":{background:"#f8f8f8",color:"#606266",height:"40px"},"row-style":{height:"40px"},onSelectionChange:B}),{empty:d(()=>[i(M,{description:"暂无数据"})]),default:d(()=>[c.config.isSelection?(n(),h(r,{key:0,type:"selection","reserve-selection":!0,width:"50"})):b("",!0),c.config.isSerialNo?(n(),h(r,{key:1,type:"index",align:"center",label:"序号",width:"80"})):b("",!0),(n(!0),f(v,null,V(R.value,(e,x)=>(n(),h(r,{key:x,"show-overflow-tooltip":"",prop:e.key,width:e.colWidth,label:e.title,align:e.align,fixed:e.fixed},{default:d(C=>[e.type==="image"?(n(),h(p,{key:0,style:ce({width:`${e.width}px`,height:`${e.height}px`}),src:C.row[e.key],"zoom-rate":1.2,"preview-src-list":[C.row[e.key]],"preview-teleported":"",fit:"cover"},null,8,["style","src","preview-src-list"])):b("",!0),e.slot?pe(t.$slots,e.slot,{key:1,scopeData:C},void 0,!0):(n(),f(v,{key:2},[T(de(C.row[e.key]),1)],64))]),_:2},1032,["prop","width","label","align","fixed"]))),128)),c.config.isOperate?(n(),h(r,{key:2,label:"操作",width:"100",fixed:"right"},{default:d(e=>[i(m,{title:"确定删除吗？",onConfirm:x=>D(e.row)},{reference:d(()=>[i(g,{text:"",type:"primary"},{default:d(()=>[T("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})):b("",!0)]),_:3},16,["data","border"])),[[Y,c.config.loading]]),S("div",fe,[c.config.isPage?(n(),h(W,{key:0,"current-page":a.page.page,"onUpdate:currentPage":o[0]||(o[0]=e=>a.page.page=e),"page-size":a.page.page_size,"onUpdate:pageSize":o[1]||(o[1]=e=>a.page.page_size=e),"pager-count":5,"page-sizes":[10,20,30,50],total:c.config.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:H,onCurrentChange:P},null,8,["current-page","page-size","total"])):b("",!0),c.config.isSetup?(n(),f("div",be,[i(_,{name:"iconfont icon-dayin",size:19,title:"打印",onClick:q}),i(_,{name:"iconfont icon-yunxiazai_o",size:22,title:"导出",onClick:F}),i(_,{name:"iconfont icon-shuaxin",size:22,title:"刷新",onClick:J}),i(X,{placement:"top-end",trigger:"click",transition:"el-zoom-in-top","popper-class":"table-tool-popper",width:300,persistent:!1,onShow:K},{reference:d(()=>[i(_,{name:"iconfont icon-quanjushezhi_o",size:22,title:"设置"})]),default:d(()=>[S("div",ye,[i(k,{modelValue:a.checkListAll,"onUpdate:modelValue":o[2]||(o[2]=e=>a.checkListAll=e),indeterminate:a.checkListIndeterminate,class:"ml10 mr1",label:"列显示",onChange:U},null,8,["modelValue","indeterminate"]),i(k,{modelValue:y.value.isSerialNo,"onUpdate:modelValue":o[3]||(o[3]=e=>y.value.isSerialNo=e),class:"ml12 mr1",label:"序号"},null,8,["modelValue"]),i(k,{modelValue:y.value.isSelection,"onUpdate:modelValue":o[4]||(o[4]=e=>y.value.isSelection=e),class:"ml12 mr1",label:"多选"},null,8,["modelValue"])]),i(G,null,{default:d(()=>[S("div",{ref_key:"toolSetRef",ref:z,class:"tool-sortable"},[(n(!0),f(v,null,V(c.header,e=>(n(),f("div",{class:"tool-sortable-item",key:e.key,"data-key":e.key},[i(k,{modelValue:e.isCheck,"onUpdate:modelValue":x=>e.isCheck=x,size:"default",class:"ml12 mr8",label:e.title,onChange:j},null,8,["modelValue","onUpdate:modelValue","label"])],8,_e))),128))],512)]),_:1})]),_:1})])):b("",!0)])])}}});const ct=he(xe,[["__scopeId","data-v-2d273a78"]]);export{ct as default};
