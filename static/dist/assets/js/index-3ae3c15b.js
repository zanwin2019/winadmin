import{C as U}from"./cropperjs-7fd6f490.js";import{g as V}from"./element-plus-9b914f77.js";import{d as g,b as z,_ as L,ag as i,o as P,c as E,V as p,P as s,a as o,U as j,T as n,n as N,bi as T,bg as A}from"./@vue-859b4330.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import"./lodash-es-21c98b27.js";import"./@vueuse-8b13c3f4.js";import"./@element-plus-e9b58552.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./@intlify-d9393dcf.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";const d=a=>(T("data-v-dd175aea"),a=a(),A(),a),M={style:{color:"#fff"}},O={class:"cropper-warp"},q={class:"cropper-warp-left"},G=["src"],H={class:"cropper-warp-right"},J=d(()=>o("div",{class:"cropper-warp-right-title"},"预览",-1)),K={class:"cropper-warp-right-item"},Q={class:"cropper-warp-right-value"},W=["src"],X=d(()=>o("div",{class:"cropper-warp-right-label"},"100 x 100",-1)),Y={class:"cropper-warp-right-item"},Z={class:"cropper-warp-right-value"},$=["src"],ee=d(()=>o("div",{class:"cropper-warp-right-label"},"50 x 50",-1)),oe={class:"dialog-footer"},te=g({name:"cropper"}),re=g({...te,props:{title:{type:String,default:()=>""}},emits:["uploadCropperImg"],setup(a,{expose:u,emit:f}){const h=a,w=f,c=z(),e=L({isShowDialog:!1,cropperImg:"",cropperImgBase64:"",cropper:""}),v=t=>{e.cropperImg=t,e.isShowDialog=!0,N(()=>{I()})},_=()=>{e.cropper.destroy(),e.isShowDialog=!1},m=()=>{_()},C=async()=>{const t=await b();w("uploadCropperImg",{img:t}),_()},I=()=>{const t=document.querySelector(".cropper-warp-left-img");e.cropper=new U(t,{viewMode:1,dragMode:"none",initialAspectRatio:1,aspectRatio:1,preview:".before",background:!0,autoCropArea:1,checkCrossOrigin:!1,crop:()=>{e.cropperImgBase64=e.cropper.getCroppedCanvas().toDataURL("image/jpeg")}})},b=()=>new Promise(t=>{e.cropper.getCroppedCanvas().toBlob(r=>{t(r)})}),x=async t=>{let r=window.URL||window.webkitURL;e.cropperImg=r.createObjectURL(t.raw),e.cropper.replace(e.cropperImg)},y=t=>{c.value.clearFiles();const r=t[0];r.uid=V(),c.value.handleStart(r)};return u({openDialog:v}),(t,r)=>{const S=i("ele-Edit"),k=i("el-icon"),l=i("el-button"),D=i("el-upload"),R=i("el-dialog");return P(),E("div",null,[p(R,{modelValue:e.isShowDialog,"onUpdate:modelValue":r[0]||(r[0]=B=>e.isShowDialog=B),width:"769px","before-close":m},{header:s(()=>[o("div",M,[p(k,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:s(()=>[p(S)]),_:1}),o("span",null,j(h.title),1)])]),footer:s(()=>[o("span",oe,[p(D,{ref_key:"uploadSignRef",ref:c,accept:".jpg,.png",limit:1,"show-file-list":!1,"auto-upload":!1,"on-change":x,"on-exceed":y,style:{display:"inline-block",position:"absolute",right:"172px"}},{default:s(()=>[p(l,{icon:"ele-Picture",size:"default"},{default:s(()=>[n("选择图片")]),_:1})]),_:1},512),p(l,{onClick:m,size:"default"},{default:s(()=>[n("取 消")]),_:1}),p(l,{type:"primary",onClick:C,size:"default"},{default:s(()=>[n("确 定")]),_:1})])]),default:s(()=>[o("div",O,[o("div",q,[o("img",{src:e.cropperImg,class:"cropper-warp-left-img"},null,8,G)]),o("div",H,[J,o("div",K,[o("div",Q,[o("img",{src:e.cropperImgBase64,class:"cropper-warp-right-value-img"},null,8,W)]),X]),o("div",Y,[o("div",Z,[o("img",{src:e.cropperImgBase64,class:"cropper-warp-right-value-img cropper-size"},null,8,$)]),ee])])])]),_:1},8,["modelValue"])])}}});const Ce=F(re,[["__scopeId","data-v-dd175aea"]]);export{Ce as default};
