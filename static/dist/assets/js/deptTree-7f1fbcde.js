import{M as O,E as Q}from"./@element-plus-e9b58552.js";import{u as S}from"./index-0c3229ca.js";import{d as E,b as _,_ as M,i as R,e as q,ag as s,aq as I,o as u,O as P,P as o,a as i,V as r,u as f,T as d,Q as U,c as j}from"./@vue-859b4330.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-fa427f68.js";import"./pinia-f5c09375.js";import"./vue-router-0ce8cd6d.js";import"./vue-i18n-a46d56de.js";import"./@intlify-d9393dcf.js";import"./vue-9a76c5f3.js";import"./js-cookie-edb2da2a.js";import"./nprogress-28073a82.js";import"./axios-28bc18a3.js";import"./qs-42f07db3.js";import"./side-channel-99bfd094.js";import"./get-intrinsic-4a38020a.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-6482c9b0.js";import"./set-function-length-9c361e89.js";import"./define-data-property-bf6c9733.js";import"./has-property-descriptors-58650a95.js";import"./gopd-e1d311d9.js";import"./object-inspect-70513235.js";import"./element-plus-9b914f77.js";import"./lodash-es-21c98b27.js";import"./@vueuse-8b13c3f4.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-18559e02.js";const F={class:"card-header"},G={class:"tree-h-flex"},H={class:"tree-h-left"},J={class:"tree-h-right"},L={style:{"margin-bottom":"45px"}},W=E({__name:"deptTree",emits:["node-click","handleQuery"],setup(X,{expose:h,emit:g}){const c=_(""),l=_(),a=M({loading:!1,orgData:[],isShowCheckbox:!1,ownOrgData:[]});R(()=>{p()}),q(c,e=>{l.value.filter(e)});const p=async()=>{a.loading=!0;var e=await S().getDept();a.orgData=e.data,a.loading=!1},v=e=>{a.isShowCheckbox=!0,l.value.setCheckedKeys([]),a.ownOrgData=e},x=()=>l.value.getCheckedKeys(),k=(e,t)=>e?t.name.includes(e):!0,w=async e=>{if(e=="expandAll")for(let t=0;t<l.value.store._getAllNodes().length;t++)l.value.store._getAllNodes()[t].expanded=!0;else if(e=="collapseAll")for(let t=0;t<l.value.store._getAllNodes().length;t++)l.value.store._getAllNodes()[t].expanded=!1;else e=="refresh"?p():e=="rootNode"&&m("handleQuery")},m=g,y=e=>{m("node-click",{id:e.id,name:e.name})};return h({initTreeData:p,setCheckedKeys:v,getCheckedKeys:x}),(e,t)=>{const b=s("el-input"),C=s("el-icon"),D=s("el-button"),n=s("el-dropdown-item"),N=s("el-dropdown-menu"),A=s("el-dropdown"),T=s("el-tree"),V=s("el-card"),B=I("loading");return u(),P(V,{class:"box-card",shadow:"hover",style:{height:"100%"},"body-style":"height:100%; overflow:auto"},{header:o(()=>[i("div",F,[i("div",G,[i("div",H,[r(b,{"prefix-icon":f(O),modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=K=>c.value=K),placeholder:"机构名称"},null,8,["prefix-icon","modelValue"])]),i("div",J,[r(A,{onCommand:w},{dropdown:o(()=>[r(N,null,{default:o(()=>[r(n,{command:"expandAll"},{default:o(()=>[d("全部展开")]),_:1}),r(n,{command:"collapseAll"},{default:o(()=>[d("全部折叠")]),_:1}),r(n,{command:"rootNode"},{default:o(()=>[d("根节点")]),_:1}),r(n,{command:"refresh"},{default:o(()=>[d("刷新")]),_:1})]),_:1})]),default:o(()=>[r(D,{style:{"margin-left":"8px",width:"34px"}},{default:o(()=>[r(C,{class:"el-icon--center"},{default:o(()=>[r(f(Q))]),_:1})]),_:1})]),_:1})])])])]),default:o(()=>[U((u(),j("div",L,[r(T,{ref_key:"treeRef",ref:l,class:"filter-tree",data:a.orgData,"node-key":"id",props:{children:"children",label:"name"},"filter-node-method":k,onNodeClick:y,"show-checkbox":a.isShowCheckbox,"default-checked-keys":a.ownOrgData,"highlight-current":"","check-strictly":""},null,8,["data","show-checkbox","default-checked-keys"])])),[[B,a.loading]])]),_:1})}}});const Me=z(W,[["__scopeId","data-v-193bb027"]]);export{Me as default};
